@page "/products"
@inject HttpClient HttpClient
@inject NavigationManager NavigationManager
@using BlazingParon.Models;

<PageTitle>Products</PageTitle>

<h1>Products in database</h1>

@if (products == null)
{
                <p><em>Loading...</em></p>
}
else
{
                <table class="table">
                <thead>
                    <tr>
                        <th>Product ID</th>
                        <th>Product Name</th>
                        <th>Price</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
            @foreach (var product in products)
            {
                                        <tr>
                                            <td>@product.ProductId</td>
                                            <td>@product.Name</td>
                                            <td>@product.Price</td>
                                            <td>@product.Description</td>
                                        </tr>
            }
                    </tbody>
                </table>
}



@code {
    List<Product> products = new();

    protected override async Task OnInitializedAsync()
    {
        products = await HttpClient.GetFromJsonAsync<List<Product>>(NavigationManager.BaseUri + "productsAPI");
    }
}
